import sqlite3


def setup_database():
    conn = sqlite3.connect('real_estate.db')
    cursor = conn.cursor()

    print("üîÑ –ù–ê–°–¢–†–û–ô–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• –° –ù–ï–ó–ê–í–ò–°–ò–ú–´–ú–ò –û–ß–ï–†–ï–î–Ø–ú–ò")
    print("=" * 50)

    # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS objects (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL
        )
    ''')

    cursor.execute('''
        CREATE TABLE IF NOT EXISTS agents (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            username TEXT NOT NULL,
            object_id INTEGER,
            queue_order INTEGER
        )
    ''')

    # –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
    cursor.execute("DELETE FROM objects")
    cursor.execute("DELETE FROM agents")

    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç—ã
    objects_data = [
        (1, '–ñ–ö ‚Ññ1 –°–µ–º–µ–π–Ω–∞—è –ò–ø–æ—Ç–µ–∫–∞ –æ—Ç 5,9% '),
        (2, '–ñ–ö ‚Ññ2 –°–µ–º–µ–π–Ω–∞—è –ò–ø–æ—Ç–µ–∫–∞ –æ—Ç 3,5% ')
    ]

    for obj in objects_data:
        cursor.execute('INSERT INTO objects (id, name) VALUES (?, ?)', obj)
    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏")

    # –î–æ–±–∞–≤–ª—è–µ–º –∞–≥–µ–Ω—Ç–æ–≤ —Å –ù–ï–ó–ê–í–ò–°–ò–ú–´–ú–ò –æ—á–µ—Ä–µ–¥—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
    agents_data = [
        # –ñ–ö –†–æ–º–∞—à–∫–∞ - —Å–≤–æ—è –æ—á–µ—Ä–µ–¥—å (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1)
        (1, '@SamoletPlus113', 1, 1),
        (2, '@qwils', 1, 2),
        (3, '+7 963 891 5555', 1, 3),

        # –ñ–ö –û–≥–æ–Ω–µ–∫ - –°–í–û–Ø –û–ß–ï–†–ï–î–¨ (—Ç–æ–∂–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1)
        (4, '@qwils', 2, 1),
        (5, '@SamoletPlus113', 2, 2),
        (6, '7 963 891 5555', 2, 3)
    ]

    for agent in agents_data:
        cursor.execute('INSERT INTO agents (id, username, object_id, queue_order) VALUES (?, ?, ?, ?)', agent)
    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≥–µ–Ω—Ç—ã —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –æ—á–µ—Ä–µ–¥—è–º–∏")

    conn.commit()

    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    print("\nüìä –ù–ê–°–¢–†–û–ï–ù–ù–´–ï –û–ß–ï–†–ï–î–ò:")
    print("=" * 40)

    # –î–ª—è –ñ–ö –†–æ–º–∞—à–∫–∞
    cursor.execute('''
        SELECT o.name, a.username, a.queue_order 
        FROM agents a 
        JOIN objects o ON a.object_id = o.id 
        WHERE o.id = 1
        ORDER BY a.queue_order
    ''')

    print("üè¢ –ñ–ö ‚Ññ1 –°–µ–º–µ–π–Ω–∞—è –ò–ø–æ—Ç–µ–∫–∞ –æ—Ç 5,9% ")
    for row in cursor.fetchall():
        print(f"   {row[2]}. @{row[1]}")

    # –î–ª—è –ñ–ö –û–≥–æ–Ω–µ–∫
    cursor.execute('''
        SELECT o.name, a.username, a.queue_order 
        FROM agents a 
        JOIN objects o ON a.object_id = o.id 
        WHERE o.id = 2
        ORDER BY a.queue_order
    ''')

    print("\nüè¢ '–ñ–ö ‚Ññ2 –°–µ–º–µ–π–Ω–∞—è –ò–ø–æ—Ç–µ–∫–∞ –æ—Ç 3,5% ")
    for row in cursor.fetchall():
        print(f"   {row[2]}. @{row[1]}")

    conn.close()
    print("\nüéâ –ë–∞–∑–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞! –û—á–µ—Ä–µ–¥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ!")


if __name__ == "__main__":
    setup_database()